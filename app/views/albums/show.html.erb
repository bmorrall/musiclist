<article>
  <header class="px-3 py-4 md:px-6 md:py-4">
    <h1 class="text-4xl leading-tight"><%= @album.title %> <% if @album.year.present? %>(<%= @album.year %>)<% end %></h1>
    <p class="text-xl leading-tight text-gray-600">
      <%= link_to @album.artist_name, @album.artist %>
      <% if @album.genre? -%>
      &ndash; <%= @album.genre %>
      <% end -%>
    </p>
  </header>
  <div class="md:flex md:items-start px-3 pb-2 md:px-6 md:pb-4">
    <aside class="block md:mx-0 flex flex-col flex-shrink-0">
      <%= image_tag album_detail_image(@album), class: "block mx-auto flex-shrink-0 h-64 sm:w-64", alt: @album.title %>
      <% if @album.lastfm_url? -%>
        <%= link_to @album.lastfm_url, class: "block mt-2 flex-shrink-0 md:w-64 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline", rel: :external, target: :_blank do %>
          <span class="fa fa-lastfm mr-1"></span>
          Read more on Last.fm
        <% end -%>
      <% end -%>
    </aside>
    <section class="mt-2 md:mt-0 md:ml-4 text-left">
      <div class="mb-2">
        <%= @album.played_button %>
        <%= @album.purchased_button %>
      </div>
      <%= @album.description %>
    </section>
  </div>
</article>

<div class="block my-2 text-center">
  <% if @album.policy.edit? -%>
  <%= link_to 'Edit', edit_album_path(@album) %> |
  <% end -%>
  <% if @album.policy.refresh? -%>
  <%= link_to 'Refresh', album_refresh_path(@album) %> |
  <% end -%>
  <%= link_to 'Back', albums_path %>
</div>
